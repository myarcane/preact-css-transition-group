{"version":3,"file":null,"sources":["../src/util.js","../src/TransitionChildMapping.js","../src/CSSCore.js","../src/TransitionEvents.js","../src/CSSTransitionGroupChild.js","../src/CSSTransitionGroup.js"],"sourcesContent":["export function getKey(vnode) {\n\treturn vnode.attributes && vnode.attributes.key;\n}\n\nexport function getComponentBase(component) {\n\treturn component.base;\n}\n\nexport function onlyChild(children) {\n\treturn children && children[0];\n}\n\nexport function filterNullChildren(children) {\n\treturn children && children.filter(i => i !== null);\n}\n\nexport const batchUIMutation = (fnMutatingUI) => {\n\tif (typeof window !== 'undefined' && window.requestAnimationFrame) {\n\t\tconst id = requestAnimationFrame(() => {\n\t\t\tcancelAnimationFrame(id);\n\t\t\tfnMutatingUI();\n\t\t});\n\t\treturn () => cancelAnimationFrame(id);\n\t}\n\n\tconst id = setTimeout(() => {\n\t\tclearTimeout(id);\n\t\tfnMutatingUI();\n\t});\n\treturn () => clearTimeout(id);\n};\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n *\tAdditional credit to the Author of rc-css-transition-group: https://github.com/yiminghe\n *\tFile originally extracted from the React source, converted to ES6 by https://github.com/developit\n */\n\nimport { getKey } from './util';\n\n\n// look for a needle in a haystack\nfunction find(arr, iter) {\n\tfor (let i=arr.length; i--; ) {\n\t\tif (iter(arr[i])) return true;\n\t}\n\treturn false;\n}\n\n\nexport function inChildrenByKey(children, key) {\n\treturn find(children, c => getKey(c)===key);\n}\n\nexport function inChildren(children, child) {\n\treturn inChildrenByKey(children, getKey(child));\n}\n\n\nexport function isShownInChildrenByKey(children, key, showProp) {\n\treturn find(children, c => (\n\t\tgetKey(c)===key && c.props[showProp]\n\t));\n}\n\nexport function isShownInChildren(children, child, showProp) {\n\treturn isShownInChildrenByKey(children, getKey(child), showProp);\n}\n\n\nexport function mergeChildMappings(prev, next) {\n\tlet ret = [];\n\n\t// For each key of `next`, the list of keys to insert before that key in\n\t// the combined list\n\tlet nextChildrenPending = {},\n\t\tpendingChildren = [];\n\tprev.forEach( c => {\n\t\tlet key = getKey(c);\n\t\tif (inChildrenByKey(next, key)) {\n\t\t\tif (pendingChildren.length) {\n\t\t\t\tnextChildrenPending[key] = pendingChildren;\n\t\t\t\tpendingChildren = [];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tpendingChildren.push(c);\n\t\t}\n\t});\n\n\tnext.forEach( c => {\n\t\tlet key = getKey(c);\n\t\tif (nextChildrenPending.hasOwnProperty(key)) {\n\t\t\tret = ret.concat(nextChildrenPending[key]);\n\t\t}\n\t\tret.push(c);\n\t});\n\n\treturn ret.concat(pendingChildren);\n}\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n *\tAdditional credit to the Author of rc-css-transition-group: https://github.com/yiminghe\n *\tFile originally extracted from the React source, converted to ES6 by https://github.com/developit\n */\n\n\nconst SPACE = ' ';\nconst RE_CLASS = /[\\n\\t\\r]+/g;\n\nlet norm = elemClass => (SPACE + elemClass + SPACE).replace(RE_CLASS, SPACE);\n\nexport function addClass(elem, className) {\n\tif (elem.classList) {\n\t\telem.classList.add(...className.split(' '));\n\t} else {\n\t\telem.className += ' ' + className;\n\t}\n}\n\nexport function removeClass(elem, needle) {\n\tneedle = needle.trim();\n\tif (elem.classList) {\n\t\telem.classList.remove(...needle.split(' '));\n\t} else {\n\t\tlet elemClass = elem.className.trim();\n\t\tlet className = norm(elemClass);\n\t\tneedle = SPACE + needle + SPACE;\n\t\twhile (className.indexOf(needle) >= 0) {\n\t\t\tclassName = className.replace(needle, SPACE);\n\t\t}\n\t\telem.className = className.trim();\n\t}\n}\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n *\tAdditional credit to the Author of rc-css-transition-group: https://github.com/yiminghe\n *\tFile originally extracted from the React source, converted to ES6 by https://github.com/developit\n */\n\n\n/**\n * EVENT_NAME_MAP is used to determine which event fired when a\n * transition/animation ends, based on the style property used to\n * define that event.\n */\nconst EVENT_NAME_MAP = {\n\ttransitionend: {\n\t\ttransition: 'transitionend',\n\t\tWebkitTransition: 'webkitTransitionEnd',\n\t\tMozTransition: 'mozTransitionEnd',\n\t\tOTransition: 'oTransitionEnd',\n\t\tmsTransition: 'MSTransitionEnd'\n\t},\n\n\tanimationend: {\n\t\tanimation: 'animationend',\n\t\tWebkitAnimation: 'webkitAnimationEnd',\n\t\tMozAnimation: 'mozAnimationEnd',\n\t\tOAnimation: 'oAnimationEnd',\n\t\tmsAnimation: 'MSAnimationEnd'\n\t}\n};\n\nlet endEvents = [];\n\nfunction detectEvents() {\n\tlet testEl = document.createElement('div'),\n\t\tstyle = testEl.style;\n\n\t// On some platforms, in particular some releases of Android 4.x,\n\t// the un-prefixed \"animation\" and \"transition\" properties are defined on the\n\t// style object but the events that fire will still be prefixed, so we need\n\t// to check if the un-prefixed events are useable, and if not remove them\n\t// from the map\n\tif (!('AnimationEvent' in window)) {\n\t\tdelete EVENT_NAME_MAP.animationend.animation;\n\t}\n\n\tif (!('TransitionEvent' in window)) {\n\t\tdelete EVENT_NAME_MAP.transitionend.transition;\n\t}\n\n\tfor (let baseEventName in EVENT_NAME_MAP) {  // eslint-disable-line guard-for-in\n\t\tlet baseEvents = EVENT_NAME_MAP[baseEventName];\n\t\tfor (let styleName in baseEvents) {\n\t\t\tif (styleName in style) {\n\t\t\t\tendEvents.push(baseEvents[styleName]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\tdetectEvents();\n}\n\nexport { endEvents };\n\nexport function addEndEventListener(node, eventListener) {\n\tif (!endEvents.length) {\n\t\t// If CSS transitions are not supported, trigger an \"end animation\" event immediately.\n\t\treturn window.setTimeout(eventListener, 0);\n\t}\n\tendEvents.forEach( endEvent => {\n\t\tnode.addEventListener(endEvent, eventListener, false);\n\t});\n}\n\nexport function removeEndEventListener(node, eventListener) {\n\tif (!endEvents.length) return;\n\tendEvents.forEach( endEvent => {\n\t\tnode.removeEventListener(endEvent, eventListener, false);\n\t});\n}\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n *\tAdditional credit to the Author of rc-css-transition-group: https://github.com/yiminghe\n *\tFile originally extracted from the React source, converted to ES6 by https://github.com/developit\n */\n\n\nimport { h, Component } from 'preact';\nimport { getComponentBase, onlyChild, batchUIMutation } from './util';\nimport { addClass, removeClass } from './CSSCore';\nimport { addEndEventListener, removeEndEventListener } from './TransitionEvents';\n\nexport class CSSTransitionGroupChild extends Component {\n\ttransition(animationType, finishCallback, timeout) {\n\n\t\tif (!timeout) {\n\t\t\tthis.raiseTimeoutConsoleError(animationType);\n\t\t}\n\n\t\tlet node = getComponentBase(this);\n\n\t\tlet className = this.props.name[animationType] || this.props.name + '-' + animationType;\n\t\tlet activeClassName = this.props.name[animationType + 'Active'] || className + '-active';\n\t\tlet timer = null;\n\n\t\tif (this.endListener) {\n\t\t\tthis.endListener();\n\t\t}\n\n\t\tthis.endListener = (e) => {\n\t\t\tif (e && e.target!==node) return;\n\n\t\t\tclearTimeout(timer);\n\t\t\tremoveClass(node, className);\n\t\t\tremoveClass(node, activeClassName);\n\t\t\tremoveEndEventListener(node, this.endListener);\n\t\t\tthis.endListener = null;\n\n\t\t\t// Usually this optional callback is used for informing an owner of\n\t\t\t// a leave animation and telling it to remove the child.\n\t\t\tif (finishCallback) {\n\t\t\t\tfinishCallback();\n\t\t\t}\n\t\t};\n\n\t\tif (timeout) {\n\t\t\ttimer = setTimeout(this.endListener, timeout);\n\t\t\tthis.transitionTimeouts.push(timer);\n\t\t} else {\n\t\t\taddEndEventListener(node, this.endListener);\n\t\t}\n\n\t\taddClass(node, className);\n\n\t\t// Need to do this to actually trigger a transition.\n\t\tthis.queueClass(activeClassName);\n\t}\n\n\traiseTimeoutConsoleError(type) {\n\t\tconst timeoutType = type === 'enter' ?  'transitionEnterTimeout' : 'transitionLeaveTimeout';\n\t\tconsole.error(`${timeoutType} should be specified`);\n\t}\n\n\tqueueClass(className) {\n\t\tthis.classNameQueue.push(className);\n\t\tthis.cancelClassNameMutation = batchUIMutation(this.flushClassNameQueue);\n\t}\n\n\tstop() {\n\t\tif (this.cancelClassNameMutation) {\n\t\t\tthis.cancelClassNameMutation();\n\t\t}\n\t\tthis.classNameQueue.length = 0;\n\t\tif (this.endListener) {\n\t\t\tthis.endListener();\n\t\t}\n\t}\n\n\tflushClassNameQueue = () => {\n\t\tif (getComponentBase(this)) {\n\t\t\taddClass(getComponentBase(this), this.classNameQueue.join(' '));\n\t\t}\n\t\tthis.classNameQueue.length = 0;\n\t};\n\n\tcomponentWillMount() {\n\t\tthis.classNameQueue = [];\n\t\tthis.transitionTimeouts = [];\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.cancelClassNameMutation) {\n\t\t\tthis.cancelClassNameMutation();\n\t\t}\n\t\tthis.classNameQueue.length = 0;\n\t\tthis.transitionTimeouts.forEach((timeout) => {\n\t\t\tclearTimeout(timeout);\n\t\t});\n\t}\n\n\tcomponentWillEnter(done) {\n\t\tif (this.props.enter) {\n\t\t\tthis.transition('enter', done, this.props.enterTimeout);\n\t\t}\n\t\telse {\n\t\t\tdone();\n\t\t}\n\t}\n\n\tcomponentWillLeave(done) {\n\t\tif (this.props.leave) {\n\t\t\tthis.transition('leave', done, this.props.leaveTimeout);\n\t\t}\n\t\telse {\n\t\t\tdone();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn onlyChild(this.props.children);\n\t}\n}\n","/**\n * Copyright 2013-2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n *\tAdditional credit to the Author of rc-css-transition-group: https://github.com/yiminghe\n *\tFile originally extracted from the React source, converted to ES6 by https://github.com/developit\n */\n\n\nimport { h, cloneElement, Component } from 'preact';\nimport { getKey, filterNullChildren } from './util';\nimport { mergeChildMappings, isShownInChildren, isShownInChildrenByKey, inChildren, inChildrenByKey } from './TransitionChildMapping';\nimport { CSSTransitionGroupChild } from './CSSTransitionGroupChild';\n\nexport class CSSTransitionGroup extends Component {\n\tstatic defaultProps = {\n\t\tcomponent: 'span',\n\t\ttransitionEnter: true,\n\t\ttransitionLeave: true\n\t};\n\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.refs = {};\n\t\tthis.state = {\n\t\t\tchildren: (props.children || []).slice()\n\t\t};\n\t}\n\n\tshouldComponentUpdate(_, { children }) {\n\t\treturn children!==this.state.children;\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.currentlyTransitioningKeys = {};\n\t\tthis.keysToEnter = [];\n\t\tthis.keysToLeave = [];\n\t}\n\n\tcomponentWillReceiveProps({ children, exclusive, showProp }) {\n\t\tlet nextChildMapping = filterNullChildren(children || []).slice();\n\n\t\t// last props children if exclusive\n\t\tlet prevChildMapping = filterNullChildren(exclusive ? this.props.children : this.state.children);\n\n\t\tlet newChildren = mergeChildMappings(\n\t\t\tprevChildMapping,\n\t\t\tnextChildMapping\n\t\t);\n\n\t\tif (showProp) {\n\t\t\tnewChildren = newChildren.map( c => {\n\t\t\t\tif (!c.props[showProp] && isShownInChildren(prevChildMapping, c, showProp)) {\n\t\t\t\t\tc = cloneElement(c, { [showProp]:true });\n\t\t\t\t}\n\t\t\t\treturn c;\n\t\t\t});\n\t\t}\n\n\t\tif (exclusive) {\n\t\t\t// make middle state children invalid\n\t\t\t// restore to last props children\n\t\t\tnewChildren.forEach( c => this.stop(getKey(c)) );\n\t\t}\n\n\t\tthis.setState({ children: newChildren });\n\t\tthis.forceUpdate();\n\n\t\tnextChildMapping.forEach( c => {\n\t\t\tlet { key } = c,\n\t\t\t\thasPrev = prevChildMapping && inChildren(prevChildMapping, c);\n\t\t\tif (showProp) {\n\t\t\t\tif (hasPrev) {\n\t\t\t\t\tlet showInPrev = isShownInChildren(prevChildMapping, c, showProp),\n\t\t\t\t\t\tshowInNow = c.props[showProp];\n\t\t\t\t\tif (!showInPrev && showInNow && !this.currentlyTransitioningKeys[key]) {\n\t\t\t\t\t\tthis.keysToEnter.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!hasPrev && !this.currentlyTransitioningKeys[key]) {\n\t\t\t\tthis.keysToEnter.push(key);\n\t\t\t}\n\t\t});\n\n\t\tprevChildMapping.forEach( c => {\n\t\t\tlet { key } = c,\n\t\t\t\thasNext = nextChildMapping && inChildren(nextChildMapping, c);\n\t\t\tif (showProp) {\n\t\t\t\tif (hasNext) {\n\t\t\t\t\tlet showInNext = isShownInChildren(nextChildMapping, c, showProp);\n\t\t\t\t\tlet showInNow = c.props[showProp];\n\t\t\t\t\tif (!showInNext && showInNow && !this.currentlyTransitioningKeys[key]) {\n\t\t\t\t\t\tthis.keysToLeave.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!hasNext && !this.currentlyTransitioningKeys[key]) {\n\t\t\t\tthis.keysToLeave.push(key);\n\t\t\t}\n\t\t});\n\t}\n\n\tperformEnter(key) {\n\t\tthis.currentlyTransitioningKeys[key] = true;\n\t\tlet component = this.refs[key];\n\t\tif (component.componentWillEnter) {\n\t\t\tcomponent.componentWillEnter( () => this._handleDoneEntering(key) );\n\t\t}\n\t\telse {\n\t\t\tthis._handleDoneEntering(key);\n\t\t}\n\t}\n\n\t_handleDoneEntering(key) {\n\t\tdelete this.currentlyTransitioningKeys[key];\n\t\tlet currentChildMapping = filterNullChildren(this.props.children),\n\t\t\tshowProp = this.props.showProp;\n\t\tif (!currentChildMapping || (\n\t\t\t!showProp && !inChildrenByKey(currentChildMapping, key)\n\t\t) || (\n\t\t\tshowProp && !isShownInChildrenByKey(currentChildMapping, key, showProp)\n\t\t)) {\n\t\t\t// This was removed before it had fully entered. Remove it.\n\t\t\tthis.performLeave(key);\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ children: currentChildMapping });\n\t\t\t// this.forceUpdate();\n\t\t}\n\t}\n\n\tstop(key) {\n\t\tdelete this.currentlyTransitioningKeys[key];\n\t\tlet component = this.refs[key];\n\t\tif (component) component.stop();\n\t}\n\n\tperformLeave(key) {\n\t\tthis.currentlyTransitioningKeys[key] = true;\n\t\tlet component = this.refs[key];\n\t\tif (component && component.componentWillLeave) {\n\t\t\tcomponent.componentWillLeave( () => this._handleDoneLeaving(key) );\n\t\t}\n\t\telse {\n\t\t\t// Note that this is somewhat dangerous b/c it calls setState()\n\t\t\t// again, effectively mutating the component before all the work\n\t\t\t// is done.\n\t\t\tthis._handleDoneLeaving(key);\n\t\t}\n\t}\n\n\t_handleDoneLeaving(key) {\n\t\tdelete this.currentlyTransitioningKeys[key];\n\t\tlet showProp = this.props.showProp,\n\t\t\tcurrentChildMapping = filterNullChildren(this.props.children);\n\t\tif (showProp && currentChildMapping &&\n\t\t\tisShownInChildrenByKey(currentChildMapping, key, showProp)) {\n\t\t\tthis.performEnter(key);\n\t\t}\n\t\telse if (!showProp && currentChildMapping && inChildrenByKey(currentChildMapping, key)) {\n\t\t\t// This entered again before it fully left. Add it again.\n\t\t\tthis.performEnter(key);\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ children: currentChildMapping });\n\t\t\t// this.forceUpdate();\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tlet { keysToEnter, keysToLeave } = this;\n\t\tthis.keysToEnter = [];\n\t\tkeysToEnter.forEach( k => this.performEnter(k) );\n\t\tthis.keysToLeave = [];\n\t\tkeysToLeave.forEach( k => this.performLeave(k) );\n\t}\n\n\trenderChild = child => {\n\t\tlet { transitionName, transitionEnter, transitionLeave, transitionEnterTimeout, transitionLeaveTimeout } = this.props,\n\t\t\tkey = getKey(child);\n\t\treturn (\n\t\t\t<CSSTransitionGroupChild\n\t\t\t\tkey={key}\n\t\t\t\tref={ c => {\n\t\t\t\t\tif (!(this.refs[key] = c)) child = null;\n\t\t\t\t}}\n\t\t\t\tname={transitionName}\n\t\t\t\tenter={transitionEnter}\n\t\t\t\tleave={transitionLeave}\n\t\t\t\tenterTimeout={transitionEnterTimeout}\n\t\t\t\tleaveTimeout={transitionLeaveTimeout}>\n\t\t\t\t{child}\n\t\t\t</CSSTransitionGroupChild>\n\t\t);\n\t};\n\n\trender({ component:Component, transitionName, transitionEnter, transitionLeave, transitionEnterTimeout, transitionLeaveTimeout, children:c, ...props }, { children }) {\n\t\treturn (\n\t\t\t<Component {...props}>\n\t\t\t\t{ filterNullChildren(children).map(this.renderChild) }\n\t\t\t</Component>\n\t\t);\n\t}\n}\n"],"names":["getKey","vnode","attributes","key","getComponentBase","component","base","onlyChild","children","filterNullChildren","filter","i","batchUIMutation","fnMutatingUI","window","requestAnimationFrame","id","cancelAnimationFrame","setTimeout","clearTimeout","find","arr","iter","length","inChildrenByKey","c","inChildren","child","isShownInChildrenByKey","showProp","props","isShownInChildren","mergeChildMappings","prev","next","ret","nextChildrenPending","pendingChildren","forEach","push","hasOwnProperty","concat","SPACE","RE_CLASS","norm","elemClass","replace","addClass","elem","className","classList","add","split","removeClass","needle","trim","remove","indexOf","EVENT_NAME_MAP","endEvents","detectEvents","testEl","document","createElement","style","animationend","animation","transitionend","transition","baseEventName","baseEvents","styleName","addEndEventListener","node","eventListener","addEventListener","endEvent","removeEndEventListener","removeEventListener","CSSTransitionGroupChild","flushClassNameQueue","classNameQueue","join","animationType","finishCallback","timeout","raiseTimeoutConsoleError","name","activeClassName","timer","endListener","e","target","transitionTimeouts","queueClass","type","timeoutType","error","cancelClassNameMutation","stop","componentWillMount","componentWillUnmount","componentWillEnter","done","enter","enterTimeout","componentWillLeave","leave","leaveTimeout","render","Component","CSSTransitionGroup","renderChild","transitionName","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","h","refs","state","slice","shouldComponentUpdate","_","currentlyTransitioningKeys","keysToEnter","keysToLeave","componentWillReceiveProps","exclusive","nextChildMapping","prevChildMapping","newChildren","map","cloneElement","setState","forceUpdate","hasPrev","showInPrev","showInNow","hasNext","showInNext","performEnter","_handleDoneEntering","currentChildMapping","performLeave","_handleDoneLeaving","componentDidUpdate","k","defaultProps"],"mappings":";;;;;;AAAO,SAASA,MAAT,CAAgBC,KAAhB,EAAuB;QACtBA,MAAMC,UAAN,IAAoBD,MAAMC,UAAN,CAAiBC,GAA5C;;;AAGD,AAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;QACpCA,UAAUC,IAAjB;;;AAGD,AAAO,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;QAC5BA,YAAYA,SAAS,CAAT,CAAnB;;;AAGD,AAAO,SAASC,kBAAT,CAA4BD,QAA5B,EAAsC;QACrCA,YAAYA,SAASE,MAAT,CAAgB;SAAKC,MAAM,IAAX;EAAhB,CAAnB;;;AAGD,AAAO,IAAMC,kBAAkB,UAACC,YAAD,EAAkB;KAC5C,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,qBAA5C,EAAmE;MAC5DC,MAAKD,sBAAsB,YAAM;wBACjBC,GAArB;;GADU,CAAX;SAIO;UAAMC,qBAAqBD,GAArB,CAAN;GAAP;;;KAGKA,KAAKE,WAAW,YAAM;eACdF,EAAb;;EADU,CAAX;QAIO;SAAMG,aAAaH,EAAb,CAAN;EAAP;CAbM;;ACAP,SAASI,IAAT,CAAcC,GAAd,EAAmBC,IAAnB,EAAyB;MACnB,IAAIX,IAAEU,IAAIE,MAAf,EAAuBZ,GAAvB,GAA8B;MACzBW,KAAKD,IAAIV,CAAJ,CAAL,CAAJ,EAAkB,OAAO,IAAP;;QAEZ,KAAP;;;AAID,AAAO,SAASa,eAAT,CAAyBhB,QAAzB,EAAmCL,GAAnC,EAAwC;QACvCiB,KAAKZ,QAAL,EAAe;SAAKR,OAAOyB,CAAP,MAAYtB,GAAjB;EAAf,CAAP;;;AAGD,AAAO,SAASuB,UAAT,CAAoBlB,QAApB,EAA8BmB,KAA9B,EAAqC;QACpCH,gBAAgBhB,QAAhB,EAA0BR,OAAO2B,KAAP,CAA1B,CAAP;;;AAID,AAAO,SAASC,sBAAT,CAAgCpB,QAAhC,EAA0CL,GAA1C,EAA+C0B,QAA/C,EAAyD;QACxDT,KAAKZ,QAAL,EAAe;SACrBR,OAAOyB,CAAP,MAAYtB,GAAZ,IAAmBsB,EAAEK,KAAF,CAAQD,QAAR,CADE;EAAf,CAAP;;;AAKD,AAAO,SAASE,iBAAT,CAA2BvB,QAA3B,EAAqCmB,KAArC,EAA4CE,QAA5C,EAAsD;QACrDD,uBAAuBpB,QAAvB,EAAiCR,OAAO2B,KAAP,CAAjC,EAAgDE,QAAhD,CAAP;;;AAID,AAAO,SAASG,kBAAT,CAA4BC,IAA5B,EAAkCC,IAAlC,EAAwC;KAC1CC,MAAM,EAAV;;KAIIC,sBAAsB,EAA1B;KACCC,kBAAkB,EADnB;MAEKC,OAAL,CAAc,aAAK;MACdnC,MAAMH,OAAOyB,CAAP,CAAV;MACID,gBAAgBU,IAAhB,EAAsB/B,GAAtB,CAAJ,EAAgC;OAC3BkC,gBAAgBd,MAApB,EAA4B;wBACPpB,GAApB,IAA2BkC,eAA3B;sBACkB,EAAlB;;GAHF,MAMK;mBACYE,IAAhB,CAAqBd,CAArB;;EATF;;MAaKa,OAAL,CAAc,aAAK;MACdnC,MAAMH,OAAOyB,CAAP,CAAV;MACIW,oBAAoBI,cAApB,CAAmCrC,GAAnC,CAAJ,EAA6C;SACtCgC,IAAIM,MAAJ,CAAWL,oBAAoBjC,GAApB,CAAX,CAAN;;MAEGoC,IAAJ,CAASd,CAAT;EALD;;QAQOU,IAAIM,MAAJ,CAAWJ,eAAX,CAAP;;;AC3DD,IAAMK,QAAQ,GAAd;AACA,IAAMC,WAAW,YAAjB;;AAEA,IAAIC,OAAO;QAAa,CAACF,QAAQG,SAAR,GAAoBH,KAArB,EAA4BI,OAA5B,CAAoCH,QAApC,EAA8CD,KAA9C,CAAb;CAAX;;AAEA,AAAO,SAASK,QAAT,CAAkBC,IAAlB,EAAwBC,SAAxB,EAAmC;KACrCD,KAAKE,SAAT,EAAoB;;;0BACdA,SAAL,EAAeC,GAAf,wBAAsBF,UAAUG,KAAV,CAAgB,GAAhB,CAAtB;EADD,MAEO;OACDH,SAAL,IAAkB,MAAMA,SAAxB;;;;AAIF,AAAO,SAASI,WAAT,CAAqBL,IAArB,EAA2BM,MAA3B,EAAmC;UAChCA,OAAOC,IAAP,EAAT;KACIP,KAAKE,SAAT,EAAoB;;;2BACdA,SAAL,EAAeM,MAAf,yBAAyBF,OAAOF,KAAP,CAAa,GAAb,CAAzB;EADD,MAEO;MACFP,YAAYG,KAAKC,SAAL,CAAeM,IAAf,EAAhB;MACIN,YAAYL,KAAKC,SAAL,CAAhB;WACSH,QAAQY,MAAR,GAAiBZ,KAA1B;SACOO,UAAUQ,OAAV,CAAkBH,MAAlB,KAA6B,CAApC,EAAuC;eAC1BL,UAAUH,OAAV,CAAkBQ,MAAlB,EAA0BZ,KAA1B,CAAZ;;OAEIO,SAAL,GAAiBA,UAAUM,IAAV,EAAjB;;;;ACnBF,IAAMG,iBAAiB;gBACP;cACF,eADE;oBAEI,qBAFJ;iBAGC,kBAHD;eAID,gBAJC;gBAKA;EANO;;eASR;aACF,cADE;mBAEI,oBAFJ;gBAGC,iBAHD;cAID,eAJC;eAKA;;CAdf;;AAkBA,IAAIC,YAAY,EAAhB;;AAEA,SAASC,YAAT,GAAwB;KACnBC,SAASC,SAASC,aAAT,CAAuB,KAAvB,CAAb;KACCC,QAAQH,OAAOG,KADhB;;KAQI,EAAE,oBAAoBlD,MAAtB,CAAJ,EAAmC;SAC3B4C,eAAeO,YAAf,CAA4BC,SAAnC;;;KAGG,EAAE,qBAAqBpD,MAAvB,CAAJ,EAAoC;SAC5B4C,eAAeS,aAAf,CAA6BC,UAApC;;;MAGI,IAAIC,aAAT,IAA0BX,cAA1B,EAA0C;MACrCY,aAAaZ,eAAeW,aAAf,CAAjB;OACK,IAAIE,SAAT,IAAsBD,UAAtB,EAAkC;OAC7BC,aAAaP,KAAjB,EAAwB;cACbzB,IAAV,CAAe+B,WAAWC,SAAX,CAAf;;;;;;;AAOJ,IAAI,OAAOzD,MAAP,KAAkB,WAAtB,EAAmC;;;;AAInC,AAEA,AAAO,SAAS0D,mBAAT,CAA6BC,IAA7B,EAAmCC,aAAnC,EAAkD;KACpD,CAACf,UAAUpC,MAAf,EAAuB;SAEfT,OAAOI,UAAP,CAAkBwD,aAAlB,EAAiC,CAAjC,CAAP;;WAESpC,OAAV,CAAmB,oBAAY;OACzBqC,gBAAL,CAAsBC,QAAtB,EAAgCF,aAAhC,EAA+C,KAA/C;EADD;;;AAKD,AAAO,SAASG,sBAAT,CAAgCJ,IAAhC,EAAsCC,aAAtC,EAAqD;KACvD,CAACf,UAAUpC,MAAf,EAAuB;WACbe,OAAV,CAAmB,oBAAY;OACzBwC,mBAAL,CAAyBF,QAAzB,EAAmCF,aAAnC,EAAkD,KAAlD;EADD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IClEYK,uBAAb;;;;;;;;;;;;yIAkECC,mBAlED,GAkEuB,YAAM;OACvB5E,uBAAJ,EAA4B;aAClBA,uBAAT,EAAiC,MAAK6E,cAAL,CAAoBC,IAApB,CAAyB,GAAzB,CAAjC;;SAEID,cAAL,CAAoB1D,MAApB,GAA6B,CAA7B;GAtEF;;;mCACC6C,UADD,uBACYe,aADZ,EAC2BC,cAD3B,EAC2CC,OAD3C,EACoD;;;MAE9C,CAACA,OAAL,EAAc;QACRC,wBAAL,CAA8BH,aAA9B;;;MAGGV,OAAOrE,iBAAiB,IAAjB,CAAX;;MAEI6C,YAAY,KAAKnB,KAAL,CAAWyD,IAAX,CAAgBJ,aAAhB,KAAkC,KAAKrD,KAAL,CAAWyD,IAAX,GAAkB,GAAlB,GAAwBJ,aAA1E;MACIK,kBAAkB,KAAK1D,KAAL,CAAWyD,IAAX,CAAgBJ,gBAAgB,QAAhC,KAA6ClC,YAAY,SAA/E;MACIwC,QAAQ,IAAZ;;MAEI,KAAKC,WAAT,EAAsB;QAChBA,WAAL;;;OAGIA,WAAL,GAAmB,UAACC,CAAD,EAAO;OACrBA,KAAKA,EAAEC,MAAF,KAAWnB,IAApB,EAA0B;;gBAEbgB,KAAb;eACYhB,IAAZ,EAAkBxB,SAAlB;eACYwB,IAAZ,EAAkBe,eAAlB;0BACuBf,IAAvB,EAA6B,OAAKiB,WAAlC;UACKA,WAAL,GAAmB,IAAnB;;OAIIN,cAAJ,EAAoB;;;GAXrB;;MAgBIC,OAAJ,EAAa;WACJnE,WAAW,KAAKwE,WAAhB,EAA6BL,OAA7B,CAAR;QACKQ,kBAAL,CAAwBtD,IAAxB,CAA6BkD,KAA7B;GAFD,MAGO;uBACchB,IAApB,EAA0B,KAAKiB,WAA/B;;;WAGQjB,IAAT,EAAexB,SAAf;;OAGK6C,UAAL,CAAgBN,eAAhB;EA3CF;;mCA8CCF,wBA9CD,qCA8C0BS,IA9C1B,EA8CgC;MACxBC,cAAcD,SAAS,OAAT,GAAoB,wBAApB,GAA+C,wBAAnE;UACQE,KAAR,CAAiBD,WAAjB;EAhDF;;mCAmDCF,UAnDD,uBAmDY7C,SAnDZ,EAmDuB;OAChBgC,cAAL,CAAoB1C,IAApB,CAAyBU,SAAzB;OACKiD,uBAAL,GAA+BtF,gBAAgB,KAAKoE,mBAArB,CAA/B;EArDF;;mCAwDCmB,IAxDD,mBAwDQ;MACF,KAAKD,uBAAT,EAAkC;QAC5BA,uBAAL;;OAEIjB,cAAL,CAAoB1D,MAApB,GAA6B,CAA7B;MACI,KAAKmE,WAAT,EAAsB;QAChBA,WAAL;;EA9DH;;mCAyECU,kBAzED,iCAyEsB;OACfnB,cAAL,GAAsB,EAAtB;OACKY,kBAAL,GAA0B,EAA1B;EA3EF;;mCA8ECQ,oBA9ED,mCA8EwB;MAClB,KAAKH,uBAAT,EAAkC;QAC5BA,uBAAL;;OAEIjB,cAAL,CAAoB1D,MAApB,GAA6B,CAA7B;OACKsE,kBAAL,CAAwBvD,OAAxB,CAAgC,UAAC+C,OAAD,EAAa;gBAC/BA,OAAb;GADD;EAnFF;;mCAwFCiB,kBAxFD,+BAwFoBC,IAxFpB,EAwF0B;MACpB,KAAKzE,KAAL,CAAW0E,KAAf,EAAsB;QAChBpC,UAAL,CAAgB,OAAhB,EAAyBmC,IAAzB,EAA+B,KAAKzE,KAAL,CAAW2E,YAA1C;GADD,MAGK;;;EA5FP;;mCAiGCC,kBAjGD,+BAiGoBH,IAjGpB,EAiG0B;MACpB,KAAKzE,KAAL,CAAW6E,KAAf,EAAsB;QAChBvC,UAAL,CAAgB,OAAhB,EAAyBmC,IAAzB,EAA+B,KAAKzE,KAAL,CAAW8E,YAA1C;GADD,MAGK;;;EArGP;;mCA0GCC,MA1GD,qBA0GU;SACDtG,UAAU,KAAKuB,KAAL,CAAWtB,QAArB,CAAP;EA3GF;;;EAA6CsG,gBAA7C;;ICAaC,kBAAb;;;6BAOajF,KAAZ,EAAmB;;;8CAClB,qBADkB;;QA6JnBkF,WA7JmB,GA6JL,iBAAS;qBACqF,MAAKlF,KAD1F;OAChBmF,cADgB,eAChBA,cADgB;OACAC,eADA,eACAA,eADA;OACiBC,eADjB,eACiBA,eADjB;OACkCC,sBADlC,eACkCA,sBADlC;OAC0DC,sBAD1D,eAC0DA,sBAD1D;OAErBlH,GAFqB,GAEfH,OAAO2B,KAAP,CAFe;;UAIrB2F;2BAAA;;UACMnH,GADN;UAEO,aAAK;UACN,EAAE,MAAKoH,IAAL,CAAUpH,GAAV,IAAiBsB,CAAnB,CAAJ,EAA2BE,QAAQ,IAAR;MAH7B;WAKOsF,cALP;YAMQC,eANR;YAOQC,eAPR;mBAQeC,sBARf;mBASeC,sBATf;;IADD;GAhKkB;;QAEbE,IAAL,GAAY,EAAZ;QACKC,KAAL,GAAa;aACF,CAAC1F,MAAMtB,QAAN,IAAkB,EAAnB,EAAuBiH,KAAvB;GADX;;;;8BAKDC,qBAfD,kCAeuBC,CAfvB,QAewC;MAAZnH,QAAY,QAAZA,QAAY;;SAC/BA,aAAW,KAAKgH,KAAL,CAAWhH,QAA7B;EAhBF;;8BAmBC4F,kBAnBD,iCAmBsB;OACfwB,0BAAL,GAAkC,EAAlC;OACKC,WAAL,GAAmB,EAAnB;OACKC,WAAL,GAAmB,EAAnB;EAtBF;;8BAyBCC,yBAzBD,6CAyB8D;;;MAAjCvH,QAAiC,SAAjCA,QAAiC;MAAvBwH,SAAuB,SAAvBA,SAAuB;MAAZnG,QAAY,SAAZA,QAAY;;MACxDoG,mBAAmBxH,mBAAmBD,YAAY,EAA/B,EAAmCiH,KAAnC,EAAvB;;MAGIS,mBAAmBzH,mBAAmBuH,YAAY,KAAKlG,KAAL,CAAWtB,QAAvB,GAAkC,KAAKgH,KAAL,CAAWhH,QAAhE,CAAvB;;MAEI2H,cAAcnG,mBACjBkG,gBADiB,EAEjBD,gBAFiB,CAAlB;;MAKIpG,QAAJ,EAAc;iBACCsG,YAAYC,GAAZ,CAAiB,aAAK;QAC/B,CAAC3G,EAAEK,KAAF,CAAQD,QAAR,CAAD,IAAsBE,kBAAkBmG,gBAAlB,EAAoCzG,CAApC,EAAuCI,QAAvC,CAA1B,EAA4E;;;SACvEwG,oBAAa5G,CAAb,qCAAmBI,QAAnB,IAA6B,IAA7B,iBAAJ;;WAEMJ,CAAP;IAJa,CAAd;;;MAQGuG,SAAJ,EAAe;eAGF1F,OAAZ,CAAqB;WAAK,OAAK6D,IAAL,CAAUnG,OAAOyB,CAAP,CAAV,CAAL;IAArB;;;OAGI6G,QAAL,CAAc,EAAE9H,UAAU2H,WAAZ,EAAd;OACKI,WAAL;;mBAEiBjG,OAAjB,CAA0B,aAAK;OACxBnC,GAAF,GAAUsB,CAAV,CAAEtB,GAAF;OACHqI,OADG,GACON,oBAAoBxG,WAAWwG,gBAAX,EAA6BzG,CAA7B,CAD3B;;OAEAI,QAAJ,EAAc;QACT2G,OAAJ,EAAa;SACRC,aAAa1G,kBAAkBmG,gBAAlB,EAAoCzG,CAApC,EAAuCI,QAAvC,CAAjB;SACC6G,YAAYjH,EAAEK,KAAF,CAAQD,QAAR,CADb;SAEI,CAAC4G,UAAD,IAAeC,SAAf,IAA4B,CAAC,OAAKd,0BAAL,CAAgCzH,GAAhC,CAAjC,EAAuE;aACjE0H,WAAL,CAAiBtF,IAAjB,CAAsBpC,GAAtB;;;IALH,MASK,IAAI,CAACqI,OAAD,IAAY,CAAC,OAAKZ,0BAAL,CAAgCzH,GAAhC,CAAjB,EAAuD;WACtD0H,WAAL,CAAiBtF,IAAjB,CAAsBpC,GAAtB;;GAbF;;mBAiBiBmC,OAAjB,CAA0B,aAAK;OACxBnC,GAAF,GAAUsB,CAAV,CAAEtB,GAAF;OACHwI,OADG,GACOV,oBAAoBvG,WAAWuG,gBAAX,EAA6BxG,CAA7B,CAD3B;;OAEAI,QAAJ,EAAc;QACT8G,OAAJ,EAAa;SACRC,aAAa7G,kBAAkBkG,gBAAlB,EAAoCxG,CAApC,EAAuCI,QAAvC,CAAjB;SACI6G,YAAYjH,EAAEK,KAAF,CAAQD,QAAR,CAAhB;SACI,CAAC+G,UAAD,IAAeF,SAAf,IAA4B,CAAC,OAAKd,0BAAL,CAAgCzH,GAAhC,CAAjC,EAAuE;aACjE2H,WAAL,CAAiBvF,IAAjB,CAAsBpC,GAAtB;;;IALH,MASK,IAAI,CAACwI,OAAD,IAAY,CAAC,OAAKf,0BAAL,CAAgCzH,GAAhC,CAAjB,EAAuD;WACtD2H,WAAL,CAAiBvF,IAAjB,CAAsBpC,GAAtB;;GAbF;EAvEF;;8BAyFC0I,YAzFD,yBAyFc1I,GAzFd,EAyFmB;;;OACZyH,0BAAL,CAAgCzH,GAAhC,IAAuC,IAAvC;MACIE,YAAY,KAAKkH,IAAL,CAAUpH,GAAV,CAAhB;MACIE,UAAUiG,kBAAd,EAAkC;aACvBA,kBAAV,CAA8B;WAAM,OAAKwC,mBAAL,CAAyB3I,GAAzB,CAAN;IAA9B;GADD,MAGK;QACC2I,mBAAL,CAAyB3I,GAAzB;;EAhGH;;8BAoGC2I,mBApGD,gCAoGqB3I,GApGrB,EAoG0B;SACjB,KAAKyH,0BAAL,CAAgCzH,GAAhC,CAAP;MACI4I,sBAAsBtI,mBAAmB,KAAKqB,KAAL,CAAWtB,QAA9B,CAA1B;MACCqB,WAAW,KAAKC,KAAL,CAAWD,QADvB;MAEI,CAACkH,mBAAD,IACH,CAAClH,QAAD,IAAa,CAACL,gBAAgBuH,mBAAhB,EAAqC5I,GAArC,CADX,IAGH0B,YAAY,CAACD,uBAAuBmH,mBAAvB,EAA4C5I,GAA5C,EAAiD0B,QAAjD,CAHd,EAIG;QAEGmH,YAAL,CAAkB7I,GAAlB;GAND,MAQK;QACCmI,QAAL,CAAc,EAAE9H,UAAUuI,mBAAZ,EAAd;;EAjHH;;8BAsHC5C,IAtHD,iBAsHMhG,GAtHN,EAsHW;SACF,KAAKyH,0BAAL,CAAgCzH,GAAhC,CAAP;MACIE,YAAY,KAAKkH,IAAL,CAAUpH,GAAV,CAAhB;MACIE,SAAJ,EAAeA,UAAU8F,IAAV;EAzHjB;;8BA4HC6C,YA5HD,yBA4Hc7I,GA5Hd,EA4HmB;;;OACZyH,0BAAL,CAAgCzH,GAAhC,IAAuC,IAAvC;MACIE,YAAY,KAAKkH,IAAL,CAAUpH,GAAV,CAAhB;MACIE,aAAaA,UAAUqG,kBAA3B,EAA+C;aACpCA,kBAAV,CAA8B;WAAM,OAAKuC,kBAAL,CAAwB9I,GAAxB,CAAN;IAA9B;GADD,MAGK;QAIC8I,kBAAL,CAAwB9I,GAAxB;;EAtIH;;8BA0IC8I,kBA1ID,+BA0IoB9I,GA1IpB,EA0IyB;SAChB,KAAKyH,0BAAL,CAAgCzH,GAAhC,CAAP;MACI0B,WAAW,KAAKC,KAAL,CAAWD,QAA1B;MACCkH,sBAAsBtI,mBAAmB,KAAKqB,KAAL,CAAWtB,QAA9B,CADvB;MAEIqB,YAAYkH,mBAAZ,IACHnH,uBAAuBmH,mBAAvB,EAA4C5I,GAA5C,EAAiD0B,QAAjD,CADD,EAC6D;QACvDgH,YAAL,CAAkB1I,GAAlB;GAFD,MAIK,IAAI,CAAC0B,QAAD,IAAakH,mBAAb,IAAoCvH,gBAAgBuH,mBAAhB,EAAqC5I,GAArC,CAAxC,EAAmF;QAElF0I,YAAL,CAAkB1I,GAAlB;GAFI,MAIA;QACCmI,QAAL,CAAc,EAAE9H,UAAUuI,mBAAZ,EAAd;;EAvJH;;8BA4JCG,kBA5JD,iCA4JsB;;;MACdrB,WADc,GACe,IADf,CACdA,WADc;MACDC,WADC,GACe,IADf,CACDA,WADC;;OAEfD,WAAL,GAAmB,EAAnB;cACYvF,OAAZ,CAAqB;UAAK,OAAKuG,YAAL,CAAkBM,CAAlB,CAAL;GAArB;OACKrB,WAAL,GAAmB,EAAnB;cACYxF,OAAZ,CAAqB;UAAK,OAAK0G,YAAL,CAAkBG,CAAlB,CAAL;GAArB;EAjKF;;8BAuLCtC,MAvLD,iCAuLuK;MAAZrG,QAAY,SAAZA,QAAY;MAAnJsG,SAAmJ,SAA7JzG,SAA6J;MAAxI4G,cAAwI,SAAxIA,cAAwI;MAAxHC,eAAwH,SAAxHA,eAAwH;MAAvGC,eAAuG,SAAvGA,eAAuG;MAAtFC,sBAAsF,SAAtFA,sBAAsF;MAA9DC,sBAA8D,SAA9DA,sBAA8D;MAA7B5F,CAA6B,SAAtCjB,QAAsC;MAAvBsB,KAAuB;;SAEpKwF;YAAA;QAAA;sBACsB9G,QAAnB,EAA6B4H,GAA7B,CAAiC,KAAKpB,WAAtC;GAFJ;EAxLF;;;EAAwCF,gBAAxC;AAAaC,mBACLqC,eAAe;YACV,MADU;kBAEJ,IAFI;kBAGJ;;;;;"}